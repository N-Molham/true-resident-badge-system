!function(e,s,t){s(function(){var e,t,n,a,o,i;!function(){var e=s("#checklist-form");if(0===e.length)return;e.find(".checklist-repeatable").on("repeatable-completed",function(e,t){t.sortable({handle:".sort-handle"})}).repeatable_item()}(),e=s("#steps_list"),t=".select-trigger-type",n=".true-resident-step-condition",a=".true-resident-tax-type",o={},i=null,e.on("keydown","input.true-resident-autocomplete",function(e){var a,t=s(e.currentTarget);if(t.hasClass("ui-autocomplete-input"))return!0;t.autocomplete({minLength:2,focus:function(e){e.preventDefault()},source:(a=t,function(e,n){var r=e.term.trim(),t=""===r||r.length<1;i&&i.abort(),t||(r in o?n(o[r]):(a.addClass("ui-autocomplete-loading"),i=s.post(trbs_triggers.urls.get_listings,{search_keywords:r,page:1,search_location:"",per_page:30,orderby:"featured",order:"DESC",form_data:"",trsc_autocomplete:!0,show_pagination:!1},function(e){if(e.success){var t=[];for(var a in e.data)t.push({label:e.data[a].text,value:e.data[a].id});o[r]=t,n(t)}}).always(function(){a.removeClass("ui-autocomplete-loading")})))})})}),e.on("change trbs-change",t,function(e){var t=s(e.currentTarget);t.siblings(n).hide().filter('[data-toggle="'+t.val()+'"]').show()}),e.on("change trbs-change",a,function(e){if(0<e.currentTarget.value.length){var t=s(e.currentTarget),a=[],n=t.siblings(".spinner"),r=t.siblings(".true-resident-term"),o=parseInt(r.data("value"));r.empty().prop("disabled",!0),t.prop("disabled",!0),n.addClass("is-active"),s.post(ajaxurl,{action:"trbs_get_taxonomy_terms",taxonomy:e.currentTarget.value},function(e){if(e.success){for(var t in e.data)e.data.hasOwnProperty(t)&&a.push('<option value="'+t+'"'+(o===parseInt(t)?" selected":"")+">"+e.data[t]+"</option>");r.html(a)}else alert(e.data)},"json").always(function(){r.prop("disabled",!1),t.prop("disabled",!1),n.removeClass("is-active")})}}),s([t,a].join(", ")).trigger("trbs-change"),s(document).on("update_step_data",function(e,a,t){t.find(n+'[data-toggle="'+a.trigger_type+'"]').each(function(e,t){a[t.getAttribute("name")]=t.value})})})}(window,jQuery);